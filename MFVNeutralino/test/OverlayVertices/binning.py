def find_binning():
    import sys
    from JMTucker.Tools.ROOTTools import ROOT, get_integral

    fn = sys.argv[1]
    f = ROOT.TFile(fn)

    h = f.Get('mfvOverlayHistos/h_dvv_true')

    target = 4000
    delta = 0.001
    lo = 0.099
    up = 0.100
    bins = [up]

    while lo > 0:
        while 1:
            i = get_integral(h, lo, up)[0]
            #print lo, up, i
            if i >= target:
                break
            lo -= delta
            if lo < 0:
                lo = 0.
                break
        #print 'new edge', lo
        bins.append(lo)
        up = lo
        lo = up - delta
    bins.append(lo)
    bins.reverse()
    print '[',
    for b in bins:
        print '%0.4f,' % b,
    print ']'

def binning(out_name):
    if 'ntk5' in out_name:
        bins = [ 0.0000, 0.0040, 0.0080, 0.0110, 0.0140, 0.0170, 0.0190, 0.0210, 0.0230, 0.0250, 0.0270, 0.0300, 0.0330, 0.0370, 0.0430, 0.0520, 0.0670, 0.0840, 0.1000, ]
    elif 'ntk4' in out_name:
        bins = [ 0.0000, 0.0010, 0.0020, 0.0030, 0.0040, 0.0050, 0.0060, 0.0070, 0.0080, 0.0090, 0.0100, 0.0110, 0.0120, 0.0130, 0.0140, 0.0150, 0.0160, 0.0170, 0.0180, 0.0190, 0.0200, 0.0210, 0.0220, 0.0230, 0.0240, 0.0250, 0.0260, 0.0270, 0.0280, 0.0290, 0.0300, 0.0310, 0.0320, 0.0330, 0.0340, 0.0350, 0.0360, 0.0370, 0.0380, 0.0390, 0.0400, 0.0410, 0.0420, 0.0430, 0.0440, 0.0450, 0.0460, 0.0470, 0.0480, 0.0490, 0.0500, 0.0510, 0.0520, 0.0530, 0.0540, 0.0550, 0.0560, 0.0570, 0.0580, 0.0590, 0.0600, 0.0610, 0.0620, 0.0630, 0.0640, 0.0650, 0.0660, 0.0670, 0.0680, 0.0690, 0.0700, 0.0710, 0.0720, 0.0730, 0.0740, 0.0750, 0.0760, 0.0770, 0.0780, 0.0790, 0.0800, 0.0810, 0.0820, 0.0830, 0.0840, 0.0850, 0.0860, 0.0870, 0.0880, 0.0890, 0.0900, 0.0910, 0.0920, 0.0930, 0.0940, 0.0950, 0.0960, 0.0980, 0.1000, ]
    elif 'ntk3' in out_name:
        bins = [ 0.0000, 0.0010, 0.0020, 0.0030, 0.0040, 0.0050, 0.0060, 0.0070, 0.0080, 0.0090, 0.0100, 0.0110, 0.0120, 0.0130, 0.0140, 0.0150, 0.0160, 0.0170, 0.0180, 0.0190, 0.0200, 0.0210, 0.0220, 0.0230, 0.0240, 0.0250, 0.0260, 0.0270, 0.0280, 0.0290, 0.0300, 0.0310, 0.0320, 0.0330, 0.0340, 0.0350, 0.0360, 0.0370, 0.0380, 0.0390, 0.0400, 0.0410, 0.0420, 0.0430, 0.0440, 0.0450, 0.0460, 0.0470, 0.0480, 0.0490, 0.0500, 0.0510, 0.0520, 0.0530, 0.0540, 0.0550, 0.0560, 0.0570, 0.0580, 0.0590, 0.0600, 0.0610, 0.0620, 0.0630, 0.0640, 0.0650, 0.0660, 0.0670, 0.0680, 0.0690, 0.0700, 0.0710, 0.0720, 0.0730, 0.0740, 0.0750, 0.0760, 0.0770, 0.0780, 0.0790, 0.0800, 0.0810, 0.0820, 0.0830, 0.0840, 0.0850, 0.0860, 0.0870, 0.0880, 0.0890, 0.0900, 0.0910, 0.0920, 0.0930, 0.0940, 0.0950, 0.0960, 0.0970, 0.0980, 0.0990, 0.1000, ]
    else:
        raise ValueError('ntk not in name? %s' % out_name)
    return bins

if __name__ == '__main__':
    find_binning()
